<!DOCTYPE html>
<html>
	<head>
		<style>
			h1 {font-family: monospace; font-weight: normal;}
			th {text-align: left;}
			table, tr {font-family: monospace; vertical-align: top;}
			td:first-child, th:first-child {padding-right: 5em;}
			.money .red {color: red;}
		</style>
		<script>

			function getDayOfYear() {
				var now = new Date();
				var start = new Date(now.getFullYear(), 0, 0);
				var diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);
				var oneDay = 1000 * 60 * 60 * 24;
				return Math.floor(diff / oneDay);
			}

			function formatNumber(number) {
				if (number >= 0) return number;
				return '<span class="red">(' + (-number) + ')</span>';
			}

			var initialSurplus = -3990;
			var annualBudget   = 5000;
			var daysIntoYear   = getDayOfYear();
			var amountAccrued  = Math.round(annualBudget * daysIntoYear / 365);
			var salaryBonus    = 0;
			var amountSpent    = 0;
			var net            = amountAccrued + initialSurplus + salaryBonus - amountSpent;
		</script>
	</head>
	<body>

		<h1>2018 Windsor Travel Budget</h1>

		<table>
			<tr>
				<th>Item</th><th>$$</th>
			</tr>
			<tr>
				<td>Travel surplus (debt) from 2017</td>
				<td class="money"><script>document.write(formatNumber(initialSurplus));</script></td>
			</tr>
			<tr>
				<td>Travel budget for 2018</td>
				<td class="money"><script>document.write(formatNumber(annualBudget));</script></td></tr>
			<tr>
				<td>
					2018 travel budget accrued<br>
					<small>(<script>document.write(formatNumber(daysIntoYear));</script> days into the year)</small>
				</td>
				<td class="money"><script>document.write(formatNumber(amountAccrued));</script></td>
			</tr>
			<tr>
				<td>Bonus from Rachel's salary<br><small>(10% gross)</small></td>
				<td class="money"><script>document.write(formatNumber(salaryBonus));</script></td>
			</tr>

			<tr><td>&nbsp;</td><td></td></tr>

			<tr>
				<td>Spent this year</td>
				<td class="money"><script>document.write(formatNumber(amountSpent));</script></td>
			</tr>

			<tr><td>&nbsp;</td><td></td></tr>

			<tr>
				<td>Current available travel budget</td>
				<td class="money">
					<script>document.write(formatNumber(net));</script>
				</td>
			</tr>
		</table>

	</body>
</html>
